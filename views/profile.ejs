<%- include('partials/home-header') %>
<body>
    <header>
        <button class="menu-btn" onclick="toggleMenu()">&#9776;</button>
        <div class="branding">
            <h1>LegacyLink</h1>
            <span>Alumni Platform of Tatyasaheb Kore Institute of Engineering and Technology</span>
        </div>
        <div class="profile-pic" onclick="openProfileSidebar()"></div>
    </header>

    <% if (user) { %>
        <div class="profile-sidebar" id="profileSidebar">
            <button class="close-btn" onclick="closeProfileSidebar()">Ã—</button>
            <h2>Profile Information</h2>
            <p>Name: <%= user.name %></p>
            <p>Batch: <%= user.batch_year %></p>
            <p>Department: <%= user.department %></p>
            <p>Email: <%= user.email %></p>
            <form action="/logout" method="POST" class="logout-form">
                <button type="submit" class="logout-button">Logout</button>
            </form>
        </div>
    <% } %>

    <div class="menu-bar" id="menuBar">
        <a href="/home">Home</a>
        <a href="/home#posts">Post Blog</a>
        <a href="/profile">Profile Changes</a>
        <a href="/home#events">Events</a>
        <a href="http://www.tkietwarana.ac.in/contact/">Contact Us</a>
    </div>
    
    <nav>
        <ul>
            <li><a href="/home">Home</a></li>
            <li><a href="/home#posts">Post Blog</a></li>
            <li><a href="/profile">Profile Changes</a></li>
            <li><a href="/home#events">Events</a></li>
            <li><a href="http://www.tkietwarana.ac.in/contact/">Contact Us</a></li>
        </ul>
    </nav>
    
    <div class="profile-container">
        <h2>Profile Settings</h2>
        
        <!-- Password Update Form -->
        <div class="profile-section">
            <h3>Change Password</h3>
            <form action="/update-password" method="POST" class="password-form">
                <div class="form-group">
                    <label for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" name="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" name="newPassword" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm New Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                </div>
                <button type="submit" class="update-button">Update Password</button>
            </form>
        </div>

        <!-- Profile Information Update Form (Alumni Only) -->
        <% if (user.type === 'alumni') { %>
            <div class="profile-section">
                <h3>Update Profile Information</h3>
                <form action="/update-profile" method="POST" class="profile-form">
                    <div class="form-group">
                        <label for="currentPosition">Current Position</label>
                        <input type="text" id="currentPosition" name="currentPosition" value="<%= user.current_position %>">
                    </div>
                    <div class="form-group">
                        <label for="company">Company</label>
                        <input type="text" id="company" name="company" value="<%= user.company %>">
                    </div>
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" name="location" value="<%= user.location %>">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" value="<%= user.email %>">
                    </div>
                    <button type="submit" class="update-button">Update Profile</button>
                </form>
            </div>
        <% } %>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to redirect to home with specific section
            function navigateToHomeSection(section) {
                window.location.href = `/home#${section}`;
            }
    
            // Add navigation functions
            window.goToHomePosts = function() {
                navigateToHomeSection('posts');
            };
    
            window.goToHomeEvents = function() {
                navigateToHomeSection('events');
            };
    
            // Optional: Handle direct hash navigation if needed
            if (window.location.hash) {
                const hash = window.location.hash.substring(1); // Remove the # symbol
                if (hash === 'posts' || hash === 'events') {
                    navigateToHomeSection(hash);
                }
            }
        });
    </script>
</body>
<%- include('partials/footer') %>